<div
  class="movie-detail-container"
  *ngIf="movieDetail"
  [style.backgroundImage]="backgroundImageUrl"
>
  <div class="details">
    <h1>{{ movieDetail.title }}</h1>
    <p class="description">
      {{ movieDetail.description }}
    </p>
    <div class="other-details">
      <span class="rating" title="suitable for age 13+"
        >IMDb {{ movieDetail.rating | number : "0.1-1" }}</span
      >
      <span class="duration">{{ movieDetail.duration | duration }}</span>
      <span class="release">{{ movieDetail.releaseYear }}</span>
      <span class="age">U/A 13+</span>
    </div>

    <div class="genres">
      <a
        [routerLink]="['/catalog/', genre.replaceAll(' ', '-')]"
        *ngFor="let genre of movieDetail.genres"
        >{{ genre }}</a
      >
    </div>

    <div class="options">
      <div class="buy">
        <button>{{ "buy now" | uppercase }}</button>
      </div>

      <div class="trailer circle" title="trailer" (click)="showTrailer = true">
        <button>
          <svg
            class="fbl-icon _30dE3d"
            viewBox="0 0 24 24"
            height="24"
            width="24"
            role="img"
            aria-hidden="true"
          >
            <title>Trailer</title>
            <svg
              width="24"
              height="24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M4.340 1.025 C 3.726 1.097,3.156 1.260,2.674 1.503 C 1.510 2.089,0.654 3.078,0.240 4.313 C -0.008 5.053,0.000 4.799,0.000 11.800 C 0.000 18.810,-0.008 18.545,0.243 19.295 C 0.730 20.750,1.850 21.870,3.305 22.357 C 4.062 22.611,3.669 22.600,12.000 22.600 C 20.331 22.600,19.938 22.611,20.695 22.357 C 22.150 21.870,23.270 20.750,23.757 19.295 C 24.008 18.545,24.000 18.810,24.000 11.800 C 24.000 4.790,24.008 5.055,23.757 4.305 C 23.278 2.875,22.146 1.731,20.744 1.260 C 19.986 1.006,20.667 1.025,12.180 1.018 C 7.934 1.014,4.406 1.017,4.340 1.025 M19.700 3.460 C 20.600 3.649,21.351 4.400,21.540 5.300 C 21.628 5.720,21.628 17.880,21.540 18.300 C 21.445 18.754,21.233 19.134,20.884 19.481 C 20.535 19.828,20.226 20.006,19.776 20.121 C 19.474 20.198,19.305 20.200,12.000 20.200 C 4.695 20.200,4.526 20.198,4.224 20.121 C 3.774 20.006,3.465 19.828,3.116 19.481 C 2.767 19.134,2.555 18.754,2.460 18.300 C 2.372 17.880,2.372 5.720,2.460 5.300 C 2.647 4.409,3.396 3.653,4.280 3.462 C 4.679 3.376,19.291 3.374,19.700 3.460 M5.104 5.891 C 4.829 6.048,4.800 6.154,4.800 6.993 C 4.800 7.811,4.827 7.928,5.055 8.091 C 5.175 8.176,5.216 8.180,6.000 8.180 C 6.784 8.180,6.825 8.176,6.945 8.091 C 7.172 7.929,7.200 7.810,7.200 7.000 C 7.200 6.157,7.173 6.058,6.901 5.899 C 6.739 5.803,6.708 5.800,5.996 5.801 C 5.308 5.801,5.250 5.807,5.104 5.891 M17.104 5.891 C 16.829 6.048,16.800 6.154,16.800 6.993 C 16.800 7.811,16.827 7.928,17.055 8.091 C 17.175 8.176,17.216 8.180,18.000 8.180 C 18.784 8.180,18.825 8.176,18.945 8.091 C 19.172 7.929,19.200 7.810,19.200 7.000 C 19.200 6.157,19.173 6.058,18.901 5.899 C 18.739 5.803,18.708 5.800,17.996 5.801 C 17.308 5.801,17.250 5.807,17.104 5.891 M9.769 8.227 C 9.741 8.238,9.692 8.299,9.659 8.362 C 9.569 8.536,9.570 15.067,9.661 15.241 C 9.731 15.377,9.886 15.431,10.037 15.372 C 10.250 15.290,15.385 12.148,15.490 12.036 C 15.559 11.962,15.600 11.874,15.600 11.800 C 15.600 11.725,15.559 11.638,15.490 11.565 C 15.327 11.392,10.033 8.199,9.916 8.203 C 9.863 8.205,9.797 8.216,9.769 8.227 M5.104 10.691 C 4.829 10.848,4.800 10.954,4.800 11.793 C 4.800 12.611,4.827 12.728,5.055 12.891 C 5.175 12.976,5.216 12.980,6.000 12.980 C 6.784 12.980,6.825 12.976,6.945 12.891 C 7.172 12.729,7.200 12.610,7.200 11.800 C 7.200 10.957,7.173 10.858,6.901 10.699 C 6.739 10.603,6.708 10.600,5.996 10.601 C 5.308 10.601,5.250 10.607,5.104 10.691 M17.104 10.691 C 16.829 10.848,16.800 10.954,16.800 11.793 C 16.800 12.611,16.827 12.728,17.055 12.891 C 17.175 12.976,17.216 12.980,18.000 12.980 C 18.784 12.980,18.825 12.976,18.945 12.891 C 19.172 12.729,19.200 12.610,19.200 11.800 C 19.200 10.957,19.173 10.858,18.901 10.699 C 18.739 10.603,18.708 10.600,17.996 10.601 C 17.308 10.601,17.250 10.607,17.104 10.691 M5.104 15.491 C 4.829 15.648,4.800 15.754,4.800 16.593 C 4.800 17.411,4.827 17.528,5.055 17.691 C 5.175 17.776,5.216 17.780,6.000 17.780 C 6.784 17.780,6.825 17.776,6.945 17.691 C 7.172 17.529,7.200 17.410,7.200 16.600 C 7.200 15.757,7.173 15.658,6.901 15.499 C 6.739 15.403,6.708 15.400,5.996 15.401 C 5.308 15.401,5.250 15.407,5.104 15.491 M17.104 15.491 C 16.829 15.648,16.800 15.754,16.800 16.593 C 16.800 17.411,16.827 17.528,17.055 17.691 C 17.175 17.776,17.216 17.780,18.000 17.780 C 18.784 17.780,18.825 17.776,18.945 17.691 C 19.172 17.529,19.200 17.410,19.200 16.600 C 19.200 15.757,19.173 15.658,18.901 15.499 C 18.739 15.403,18.708 15.400,17.996 15.401 C 17.308 15.401,17.250 15.407,17.104 15.491 "
                fill="currentColor"
                stroke="none"
                fill-rule="evenodd"
              ></path>
            </svg>
          </svg>
        </button>
      </div>

      <div class="cart circle" title="add to cart">
        <button (click)="isPresentIncart?removeFromCart():addToCart()">
          <svg
            class="fbl-icon _30dE3d"
            viewBox="0 0 24 24"
            height="24"
            width="24"
            role="img"
            aria-hidden="true"
            *ngIf="!isPresentIncart"
          >
            <title>Add to cart</title>
            <svg
              width="24"
              height="24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11.664 2.063 C 11.436 2.146,11.257 2.297,11.131 2.511 L 11.020 2.700 11.009 6.850 L 10.999 11.000 6.924 11.000 C 2.491 11.000,2.677 10.991,2.374 11.222 C 2.301 11.277,2.192 11.408,2.131 11.511 C 2.036 11.672,2.020 11.744,2.020 12.000 C 2.020 12.256,2.036 12.328,2.131 12.489 C 2.192 12.592,2.301 12.723,2.374 12.778 C 2.677 13.009,2.491 13.000,6.925 13.000 L 11.000 13.000 11.000 17.070 C 11.000 19.750,11.015 21.191,11.042 21.289 C 11.103 21.509,11.315 21.762,11.531 21.874 C 11.932 22.080,12.390 22.012,12.700 21.702 C 13.018 21.385,13.000 21.656,13.000 17.073 L 13.000 13.000 17.073 13.000 C 21.654 13.000,21.385 13.017,21.701 12.701 C 22.092 12.310,22.092 11.690,21.701 11.299 C 21.385 10.983,21.654 11.000,17.073 11.000 L 13.000 11.000 13.000 6.927 C 13.000 2.346,13.017 2.615,12.701 2.299 C 12.429 2.027,12.018 1.933,11.664 2.063 "
                fill="currentColor"
                stroke="none"
                fill-rule="evenodd"
              ></path>
            </svg>
          </svg>
          <svg
            class="fbl-icon _30dE3d"
            viewBox="0 0 24 24"
            height="24"
            width="24"
            role="img"
            aria-hidden="true"
            *ngIf="isPresentIncart"
          >
            <title>In cart</title>
            <svg
              width="24"
              height="24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M20.714 5.037 C 20.655 5.056,20.554 5.103,20.488 5.142 C 20.422 5.180,17.889 7.757,14.858 10.867 C 11.826 13.977,9.331 16.517,9.313 16.511 C 9.295 16.505,8.006 15.114,6.450 13.421 C 4.385 11.174,3.571 10.314,3.440 10.242 C 3.199 10.109,2.780 10.103,2.536 10.230 C 2.341 10.332,2.144 10.547,2.057 10.751 C 1.971 10.956,1.978 11.320,2.073 11.530 C 2.142 11.684,3.662 13.359,7.791 17.834 C 8.780 18.906,8.901 18.999,9.300 18.999 C 9.744 18.999,9.399 19.330,15.843 12.724 C 19.696 8.774,21.813 6.576,21.875 6.460 C 22.215 5.821,21.789 5.058,21.068 5.016 C 20.932 5.008,20.772 5.018,20.714 5.037 "
                fill="currentColor"
                stroke="none"
                fill-rule="evenodd"
              ></path>
            </svg>
          </svg>
        </button>
      </div>

      <div class="share circle" title="share" (click)="showShare = true">
        <button>
          <svg
            class="fbl-icon _30dE3d"
            viewBox="0 0 24 24"
            height="24"
            width="24"
            role="img"
            aria-hidden="true"
          >
            <title>Share</title>
            <svg
              width="24"
              height="24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M17.433 2.043 C 17.038 2.101,16.711 2.201,16.335 2.378 C 15.838 2.612,15.516 2.837,15.159 3.197 C 14.439 3.923,14.053 4.818,14.010 5.862 L 13.990 6.345 11.172 7.552 L 8.354 8.760 8.067 8.587 C 7.396 8.183,6.807 8.021,6.000 8.021 C 5.390 8.021,5.009 8.091,4.520 8.291 C 3.724 8.617,3.119 9.113,2.657 9.820 C 2.397 10.217,2.270 10.501,2.131 10.996 C 2.035 11.338,2.023 11.448,2.022 12.000 C 2.022 12.563,2.032 12.657,2.136 13.020 C 2.574 14.552,3.699 15.602,5.248 15.923 C 6.184 16.117,7.282 15.914,8.103 15.395 L 8.350 15.239 11.170 16.447 L 13.989 17.655 14.012 18.157 C 14.064 19.302,14.567 20.336,15.420 21.052 C 17.515 22.812,20.708 22.008,21.717 19.469 C 22.400 17.747,21.790 15.746,20.265 14.710 C 19.913 14.471,19.340 14.213,18.938 14.113 C 18.433 13.987,17.575 13.988,17.062 14.114 C 16.654 14.215,16.088 14.471,15.715 14.723 C 15.449 14.903,15.035 15.296,14.798 15.593 L 14.660 15.766 12.185 14.705 C 10.825 14.122,9.702 13.636,9.692 13.625 C 9.682 13.615,9.718 13.474,9.774 13.313 C 10.072 12.444,10.065 11.445,9.755 10.616 C 9.709 10.494,9.681 10.386,9.692 10.375 C 9.702 10.364,10.824 9.878,12.185 9.295 L 14.659 8.234 14.753 8.347 C 15.446 9.187,16.078 9.617,16.986 9.869 C 17.338 9.966,17.446 9.978,18.000 9.978 C 18.690 9.977,18.996 9.917,19.587 9.668 C 21.295 8.947,22.290 7.055,21.919 5.235 C 21.786 4.582,21.578 4.120,21.173 3.576 C 20.339 2.455,18.833 1.838,17.433 2.043 M18.383 4.043 C 19.185 4.190,19.839 4.872,19.967 5.695 C 20.153 6.894,19.209 8.000,18.000 8.000 C 17.032 8.000,16.183 7.268,16.033 6.305 C 15.933 5.663,16.132 5.061,16.596 4.596 C 17.085 4.108,17.698 3.918,18.383 4.043 M6.383 10.043 C 7.185 10.190,7.839 10.872,7.967 11.695 C 8.153 12.894,7.209 14.000,6.000 14.000 C 5.032 14.000,4.183 13.268,4.033 12.305 C 3.933 11.663,4.132 11.061,4.596 10.596 C 5.085 10.108,5.698 9.918,6.383 10.043 M18.383 16.043 C 19.185 16.190,19.839 16.872,19.967 17.695 C 20.153 18.894,19.209 20.000,18.000 20.000 C 17.032 20.000,16.183 19.268,16.033 18.305 C 15.933 17.663,16.132 17.061,16.596 16.596 C 17.085 16.108,17.698 15.918,18.383 16.043 "
                fill="currentColor"
                stroke="none"
                fill-rule="evenodd"
              ></path>
            </svg>
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>

<div class="more-details-container">
  <div class="more-details">
    <h5>more details</h5>
    <ul>
      <li *ngFor="let detail of moreDetails">
        <p class="more-details-title">{{ detail.title }}</p>
        <p class="more-details-value">{{ detail.value }}</p>
      </li>
    </ul>
  </div>
</div>

<div class="trailer-overlay" *ngIf="movieDetail && showTrailer">
  <div class="trailer-container">
    <span class="material-symbols-outlined" (click)="showTrailer = false">
      close
    </span>
    <video
      [src]="trailerUrl + '?token=' + trailerToken"
      controls
      autoplay
      controlsList="nodownload"
      #videoPlayer
      (error)="handleVideoError($event)"
    ></video>
  </div>
</div>

<div class="share-overlay" *ngIf="showShare && movieDetail">
  <div class="share-container">
    <span class="material-symbols-outlined" (click)="showShare = false">
      close
    </span>
    <div class="title"><h4>Share the URL</h4></div>
    <share-buttons
      [theme]="'modern-light'"
      [include]="[
        'facebook',
        'twitter',
        'linkedin',
        'pinterest',
        'reddit',
        'tumblr',
        'mix',
        'viber',
        'vk',
        'telegram',
        'messenger',
        'whatsapp',
        'xing',
        'line',
        'sms',
        'email',
        'print',
        'copy'
      ]"
      [show]="5"
      [url]="currentUrl"
      [autoSetMeta]="false"
    ></share-buttons>
  </div>
</div>
